#!/usr/bin/env bash

NUM_USERS=$(ls /home | wc -l)
USER=$(ls /home)

# SteamOS SDDM config
SDDM_CONF='/etc/sddm.conf.d/steamos.conf'

# Configure autologin
sed -i 's/.*Session=.*/Session=plasmax11.desktop/g' ${SDDM_CONF}
if [ ${NUM_USERS} -eq 1 ]; then
  sed -i 's/.*User=.*/User='${USER}'/g' ${SDDM_CONF}
fi

# Remove sddm.conf if it exists
if [ -f '/etc/sddm.conf' ]; then
  rm -f /etc/sddm.conf
fi
